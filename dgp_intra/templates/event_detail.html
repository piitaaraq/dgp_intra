{% extends "base.html" %} {% block title %}{{ event.name }} – DgP Intra{%
endblock %} {% block content %}
<!-- Hero -->
<div class="p-4 p-md-5 mb-4 hero bg-accent-2">
  <h1 class="display-6 fw-semibold mb-2">{{ event.name }}</h1>
  <div class="d-flex flex-wrap gap-2">
    <span class="badge bg-light text-dark border rounded-pill">Dato: {{ event.date.strftime('%d-%m-%Y') }}</span>
    <span class="badge bg-light text-dark border rounded-pill">Tidspunkt: {{ event.time.strftime('%H:%M') }}</span>
    <span class="badge text-bg-brand rounded-pill">Arrangør: {{ event.organizer.name }}</span>
    {% if event.deadline %}
    <span class="badge bg-light text-dark border rounded-pill">Frist: {{ event.deadline.strftime('%d-%m-%Y') }}</span>
    {% endif %}
  </div>
</div>

<div class="row g-4">
  <div class="col-lg-8">
    <!-- Details + Actions -->
    <div class="card border-0 shadow-sm rounded-3 mb-3">
      <div class="card-header bg-accent-1 border-accent-1 rounded-top-3">
        <h2 class="h5 mb-0">Detaljer</h2>
      </div>
      <div class="card-body">
        <p class="text-body-secondary mb-4">
          Her kan du tilmelde/afmelde dig arrangementet og se deltagerlisten.
        </p>

        <div class="d-grid gap-2">
          {% if is_registered %}
          <form action="{{ url_for('events.unregister', event_id=event.id) }}" method="post">
            <button class="btn btn-light w-100 rounded-2" type="submit">
              Afmeld
            </button>
          </form>
          {% else %}
          <form action="{{ url_for('events.register', event_id=event.id) }}" method="post">
            <button class="btn btn-brand w-100 rounded-2" type="submit">
              Tilmeld
            </button>
          </form>
          {% endif %} {% if event.organizer_id == current_user.id %}
          <form action="{{ url_for('events.delete', event_id=event.id) }}" method="post"
            onsubmit="return confirm('Er du sikker på, at du vil slette dette arrangement?');">
            <button class="btn btn-outline-danger w-100 rounded-2" type="submit">
              Slet arrangement
            </button>
          </form>
          {% endif %}
        </div>
      </div>

      {% if is_registered %}
      <div class="card-footer text-bg-success text-center rounded-bottom-3">
        Du er tilmeldt
      </div>
      {% endif %}
    </div>
  </div>

  <div class="col-lg-4">
    <!-- Participants -->
    <div class="card border-0 shadow-sm rounded-3">
      <div
        class="card-header bg-accent-1 border-accent-1 rounded-top-3 d-flex justify-content-between align-items-center">
        <h2 class="h5 mb-0">Deltagere</h2>
        <span class="badge bg-light text-dark border">{{ registered_users|length }}</span>
      </div>
      <ul class="list-group list-group-flush">
        {% for user in registered_users %}
        <li class="list-group-item">{{ user.name }}</li>
        {% else %}
        <li class="list-group-item text-muted">Ingen tilmeldte endnu</li>
        {% endfor %}
      </ul>
    </div>
  </div>
</div>

<hr class="mt-5" />

<div class="d-flex flex-wrap gap-2">
  <a href="{{ url_for('events.list') }}" class="btn btn-link">← Tilbage til arrangementer</a>
</div>
{% endblock %}